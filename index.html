<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Punching Game</title>
</head>
<body>
    <header>
        <div id="p1Health">
            <p id = "playerHealth"></p>
        </div>
        <div id="restart">
            
        </div>
        <div id="p2Health">
            <p id="opponentHealth"></p>
        </div>
    </header>
    <button id="attack" style="background-color: purple;" onclick = playerAttack()> ATTACK</button> <!--attack button-->
    <button id="defend" style="background-color: pink;" onclick = playerDefend()> DEFEND</button> <!--defend button-->
    
    <section>
        <div id="textbox">
            <p id="output"></p>
        </div>
        <div id="dropdown">
            <div class="dropdown-content" id="attack" style="background-color: red;" onclick="tossCoinHeads()">HEAD</div>
            <div class="dropdown-content" id="defend" style="background-color: blue;" onclick="tossCoinTails()">TAIL</div>
        </div>
    </section>
    
    <script> 
    // health status
        var playerHealth = 100;
        var opponentHealth = 100;
        
    // toss coin
        var attackOrDefend; //var checks if the user gets to attack, defend, or both

        function tossCoinHeads() { //function does a coin toss if the user chooses heads
            var coin = Math.random();
            coin = Math.round(coin);
            if (coin == 0) {
                 attackOrDefend = true;
                alert("Coin is head. You chose head!");
            }
            else {
                 attackOrDefend = false;
                alert("Coin is  tail. You chose head!");
            }
            actionBtnVisible();
        }
        function tossCoinTails() { //function does a coin toss if the user chooses tails
            var coin = Math.random();
            coin = Math.round(coin);
            if (coin == 0) {
                 attackOrDefend = false;
                alert("Coin is head. You chose tails!");
            }
            else {
                 attackOrDefend = true;
                alert("Coin is  tail. You chose tail!");
            }
            actionBtnVisible();
        }

        function actionBtnVisible() { //function changes the visibility of the attack/defend buttons depending on the result of the coin toss
            if (attackOrDefend == true) {
                document.getElementById("attack").style.display = "block";
                document.getElementById("defend").style.display = "none";
            }
            else {
                document.getElementById("attack").style.display = "block";
                document.getElementById("defend").style.display = "block";
            }
        }
        
    //reset button

    // damage
        function calculateDamage() {
            var damage = Math.floor((Math.random() * 5) + 1);
        }
    // attackOrDefend
        // determines the opponent's action
        function opponentAction() {
            var Action = Math.random() * 2;

            if(Action === 1) {
                alert("Opponent attacks!");
                
            }
            else {
                alert("Opponent defends!");
            }
        }

        // executes when the player selects attack
        function playerAttack() {
            var playerDamage = calculateDamage();
            var opponentAction = opponentAction();
            if (opponentAction === 1 ) {
                opponentHealth -= playerDamage;
                alert("You inflict " + playerDamage + " damage.");
            }

            else {
                alert("The opponent completely blocked the attack!");
            }

            document.getElementById("playerHealth").innerHTML = playerHealth;
            document.getElementById("opponentHealth").innerHTML = opponentHealth;

            checkHealth();
        }
        
        // executes when the player selects defend
        function playerDefend() {
            var opponentDamage = calculateDamage();
            var DamageDone = opponentDamage - 3;
            if(DamageDone <= -1){
                DamageDone = 0;
                if(opponentDamage > 0){
                    alert("Opponent inflicts "+DamageDone+" damage");
                }
                else{
                    alert("You completely blocked the opponent.")
                }
            }

            document.getElementById("playerHealth").innerHTML = playerHealth;
            document.getElementById("opponentHealth").innerHTML = opponentHealth;

            checkHealth();
        }
    // checks the player's and opponent's health
        function checkHealth(playerHealth, opponentHealth) {
            if(playerHealth == 0) {
                document.getElementById("output").innerHTML = "Opponent Wins!";
            }
            else if(opponentHealth == 0) {
                document.getElementById("output").innerHTML = "You Win!";
            }
            else {
                document.getElementById("playerHealth").innerHTML = "HP: " + playerHealth;
                document.getElementById("opponentHealth").innerHTML = "HP: " + opponentHealth;
            }
        }
    
    </script>
    <link rel="stylesheet" href="styles.css">
</body>